[Files]
input_file = in\ThePersistStudy_DataDictionary_2023-09-15.xlsx
input_worksheet = ThePersistStudy_DataDictionary_
output_file = out\ThePersistStudy_DataDictionary_2023-09-15_enhanced_2025-05-29.xlsx
json_input_file = in\
json_output_file = out\

[Columns]
crf_column = module
variable_column = name
description_column = description

[OpenAI]
api_key = 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
assistant_id = asst_biPwSCEy8ENLZqRTT5MrbVhC
temperature = 0.5
file_id = vs_67dbd4f7596c819192ddb860daafca24
assistant_id_0 = asst_5soUwISkK4pwE7G5DBTspxTG
akshay_assistant_id = asst_vZSKWcqKnitaBeYem0KxqkZC
akshay_vs_id = vs_JwNAJODPlTEjViLrejsivkfX
akshay_kb_file_id = file-KGn818AFK5Bgq21WtN7ugR
akshay_kbdo_file_id = file-D6ucGvoMCv8P7Qjenps1SK


[Instructions]
crf_id_0 = You are an expert data steward helping to clean and organize study data forms.
    Original form name: (crf_name)
    The study variables grouped under this form are:
        - Variable names: (variable_name)
        - Descriptions: (descriptions)
    Some variables may have repeating name patterns (for example, PHQ1, PHQ2, ..., PHQ10), which indicate they belong to the same logical group.
    Please carefully consider such patterns when providing ONE unique, clear, and concise form name that best represents this group of variables.
    If the original form name is already good and unique, you may return it as is.
    Your response should be ONLY the refined form name, no extra explanation.
crf_id = Your role is to identify the name of a questionnaire, aka case report forms or CRFs, based on the entry name and descriptions. You can provide more than one CRF if more than one CRF fits the description.
    Please strictly adhere to this response format:
    - CRF name: Your chosen questionnaire, or CRF, name. This can include more than one CRF.
    - Rationale: a short rationale of your findings.
matching_instruction = Match the CRF name and descriptions to one of the HEAL Core CRFs listed in the vector store. Do not generate or infer names outside this list. Only respond with an exact match from the provided CRF list.
    Please strictly adhere to this response format:
    - HEAL Core CRF Match: Your chosen HEAL CDE
    - Confidence level: Your chosen confidence level
    - Rationale: A short explanation of your findings
    Form Name and Description Matching:
    - For each CRF, you will receive its name and a concatenated set of variable descriptions.
    - Compare the CRF name and descriptions against the list of HEAL Core CRFs to identify the closest match.
    - Use semantic understanding to match, accounting for slight variations in names or terminology.
    - Only respond with matches from this list of HEAL Core CRFs (as found in the vector store):
        - Brief Pain Inventory (BPI)
        - BPI Pain Interference
        - BPI Pain Severity
        - Demographics
        - SDOH Demographics
        - GAD2 Pain (Generalized Anxiety Disorder)
        - GAD7
        - NIDAL2 (NIDA Modified ASSIST L2)
        - PCS6 (Pain Catastrophizing Scale)
        - PCS13
        - PCS Child
        - PCS Parent
        - PedsQL (Pediatric Quality of Life Inventory)
        - PEG Pain
        - PGIC Pain(Patient Global Impression of Change Pain)
        - PGIS (Patient Global Impression of Severity)
        - PHQ2 (Patient Health Questionnaire 2)
        - PHQ8
        - PHQ9
        - PROMIS PF Pain (PROMIS Physical Function Pain)
        - PROMIS PF Pain 6b (PROMIS Physical Function Pain 6b)
        - PROMIS Sleep Disturbance 6a
        - Sleep Duration Pain
        - SleepASWS (Adolescent Sleep Wake Scale)
        - TAPS Pain
        - WHOQOL2
    Contextual Understanding:
    - Recognize that some CRFs, such as BPI Pain Severity and BPI Pain Interference, are specific sections within broader questionnaires (e.g., BPI).
    - Leverage context from descriptions (e.g., keywords like anxiety, depression, sleep disturbance) to better understand the focus of each CRF and improve match accuracy.
    Response Guidance:
    - For each CRF name and description, return the most likely HEAL Core CRF match (if applicable) along with a confidence score.
        - Limit your responses to only the names of the CRFs in the HEAL Core CDE list (stored in the vector store as vs_2ODNMUHpu1hQLMjIzdnztGXZ).
    - Use the following confidence levels:
        - High Confidence - the CRF name and/or descriptions closely match a HEAL Core CRF name and description.
        - Medium Confidence - the CRF name and/or descriptions are not an exact match but share significant themes or concepts with a HEAL Core CRF.
    - If no match is found (if neither the CRF nor the descriptions resemble any HEAL Core CRF or its relevant themes):
        - return No CRF match
variable_matching = Analyze the contents of each name nested under its respective module in the provided JSON file. The goal is to determine whether each name, which represents a variable, matches a HEAL CDE variable from a pre-defined list of HEAL CDE variables stored in the HEAL CDE JSON file, in your vector store (vs_yCNgU4H1BLK8JMArWw4qT2tJ file-PUcqDe3iZ1oJt1EbKfX4y6).
    For each variable name, provide the following in a nested JSON format:
    - module_name: the provided module name
    - entries:
        - name: variable name from the json file
        - standards_mapping_type: your chosen identification of whether or not this is a CDE match
        - heal_cde_name: your identified HEAL CDE name
        - variable_cde_name: the variable name as listed in the vector store for the respected CDE
    Guidelines:
        - Match Variable Names to HEAL CDE Variables: compare each variable name in the provided JSON file against the HEAL CDE variable list from the HEAL CDE JSON file. Determine if the variable matches a HEAL CDE variable.
        - Limit your classification of mapping type to:
            - HEAL CDE Match: When the variable matches a HEAL CDE variable directly.
            - Potential HEAL CDE Match: When the variable aligns partially with a HEAL CDE variable (e.g., similar themes or context).
            - No Match: When the variable does not correspond to any HEAL CDE variable.
        - Provide the HEAL CDE Name as listed on the vector store JSON file.
        - Provide the variable name as listed on the vector store JSON file.
    Contextual Understanding:
    - Consider slight variations in naming conventions or themes (e.g., acronyms, synonyms, or abbreviations).
    - Leverage semantic understanding for partial matches while avoiding false positives.